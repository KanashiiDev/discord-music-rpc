<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Discord Music RPC Server Dashboard</title>
    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="stylesheet" href="libs/simplebar.css" />
    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <header>Discord Music RPC Server Dashboard</header>

    <div class="container">
      <!-- Navigation -->
      <span id="actions">
        <span id="toggleContainer" title="Change View" role="button" aria-label="Toggle Grid/List View"></span>
        <span id="settingsToggle" title="Settings" role="button" aria-label="Open Settings"></span>
        <span id="settingsBack" title="Back" style="display: none" role="button" aria-label="Back to Dashboard"></span>
      </span>

      <!-- Settings Container -->
      <div id="settingsContainer" style="display: none">
        <h2 id="settingsTitle">Settings</h2>
        <form id="settingsForm"></form>
        <div class="buttons">
          <button id="saveSettingsBtn" class="save-settings-btn" type="button">Save Changes</button>
          <button id="resetSettingsBtn" class="reset-settings-btn" type="button">Reset to Default</button>
        </div>
      </div>

      <!-- Main Content -->
      <div class="main">
        <div class="theme">
          <div class="left">
            <!-- Status -->
            <section>
              <h2 id="rpcHeader">RPC Status</h2>
              <div class="status-box">
                <div class="status">
                  Status:
                  <span id="rpcStatus" aria-live="polite">Loading...</span>
                </div>
              </div>
            </section>

            <!-- Current Activity -->
            <section>
              <h2 class="collapsible" role="button" aria-expanded="true" tabindex="0">
                <span>Current Activity</span>
                <span class="arrow" aria-hidden="true"></span>
              </h2>
              <div class="activity activity-box">
                <div id="activityWrapper" data-simplebar>
                  <pre id="activityJson">{ }</pre>
                </div>
              </div>
            </section>

            <!-- Last Update -->
            <section>
              <h2 class="collapsible" role="button" aria-expanded="true" tabindex="0">
                <span>Last Update</span>
                <span class="arrow" aria-hidden="true"></span>
              </h2>
              <div class="last-activity activity-box">
                <div id="lastActivityWrapper" data-simplebar>
                  <pre id="lastActivityJson">{ }</pre>
                </div>
              </div>
            </section>
          </div>

          <div class="right">
            <!-- Music Card -->
            <section id="musicCardContainer">
              <h2 id="musicCardHeader">Now Listening</h2>
              <div class="music-card" id="musicCard">
                <div class="music-body">
                  <div class="music-cover">
                    <img id="coverImage" src="assets/icon-dark.png" alt="Cover" loading="lazy" />
                  </div>

                  <div class="music-info">
                    <h2 id="trackTitle">Title</h2>
                    <p id="trackArtist" class="artist">Artist</p>
                    <p id="trackSource" class="source">Source</p>

                    <div class="progress-container">
                      <span id="timePassed">00:00</span>
                      <div class="progress-bar" id="progressBar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
                        <div id="progressFill" class="progress" style="width: 0%"></div>
                      </div>
                      <span id="duration">00:00</span>
                    </div>

                    <div class="link-container" id="linkContainer">
                      <a id="trackLink1" class="link" style="display: none" target="_blank" rel="noopener">Button 1</a>
                      <a id="trackLink2" class="link" style="display: none" target="_blank" rel="noopener">Button 2</a>
                    </div>
                  </div>
                </div>
              </div>
            </section>

            <!-- Recent Songs -->
            <section>
              <h2 class="collapsible history" role="button" aria-expanded="true" tabindex="0">
                <span>Recent Songs</span>
                <select id="historyFilter" aria-label="Filter history by platform">
                  <option value="all">All</option>
                </select>
                <span class="arrow" aria-hidden="true"></span>
              </h2>
              <div class="history activity-box">
                <div id="historyWrapper" data-simplebar>
                  <div id="historyContainer" role="log" aria-live="polite"></div>
                </div>
              </div>
            </section>
          </div>
        </div>

        <!-- Stats -->
        <section id="chartContainer">
          <h2 id="chartHeader">Stats</h2>
          <div class="chart-container">
            <div class="chart-controls">
              <div id="chartRangeToggle" class="btn-group" role="group" aria-label="Select time range">
                <button class="chart-range-btn" data-range="week" type="button">Week</button>
                <button class="chart-range-btn active" data-range="month" type="button">Month</button>
                <button class="chart-range-btn" data-range="year" type="button">Year</button>
              </div>
              <div id="chartModeToggle" class="btn-group" role="group" aria-label="Select chart metric">
                <button class="chart-mode-btn active" data-mode="minutes" type="button">&#9201; Time</button>
                <button class="chart-mode-btn" data-mode="songs" type="button">&#9835; Songs</button>
              </div>
            </div>

            <div class="chart-canvas-wrap">
              <div id="historyChartLoading" aria-live="polite">Loading stats...</div>
              <canvas id="listeningWaveform" role="img" aria-label="Listening statistics chart"></canvas>
            </div>

            <div id="chartDetails" class="chart-details hidden">
              <div class="chart-details-header">
                <span id="chartDetailsTitle" class="chart-details-date"></span>
                <span id="chartDetailsTotal" class="chart-details-total"></span>
              </div>
              <div id="chartDetailsPlatforms" class="chart-details-platforms"></div>
            </div>
          </div>
        </section>

        <!-- Logs -->
        <section id="LogsContainer">
          <h2 class="collapsible logs" role="button" aria-expanded="false" tabindex="0">
            <span>Logs</span>
            <label class="log-select">
              <select id="errorFilter" aria-label="Filter logs by level">
                <option value="all">All</option>
                <option value="error">Error</option>
                <option value="info">Info</option>
              </select>
            </label>
            <span class="arrow" aria-hidden="true"></span>
          </h2>
          <div class="logs activity-box">
            <div id="logsWrapper" data-simplebar>
              <div id="logsContainer" role="log" aria-live="polite"></div>
            </div>
          </div>
        </section>
      </div>
    </div>

    <footer><a href="https://github.com/KanashiiDev/discord-music-rpc">Discord Music RPC by KanashiiDev</a></footer>

    <!-- Libs -->
    <script src="libs/lazysizes.js"></script>
    <script src="libs/simplebar.js"></script>
    <script src="libs/chart.js"></script>

    <!-- Main -->
    <script type="module" src="index.js"></script>
  </body>
</html>
